topology: HIERARCHICAL
hierarchical_config:
  num_levels: 4
  connection_mode: tree
  word_bits: 8
  level_configs:
  - level: 0
    node_type: DRAM
    buffer_size: 37748736
    roles: ROLE_DRAM
    bandwidth: 512
    fanouts: 1
    routing_patterns:
      INPUT:
        mode: INPUT
        port_groups:
        - - 0
      WEIGHT:
        mode: WEIGHT
        port_groups:
        - - 0
      OUTPUT:
        mode: OUTPUT
        port_groups:
        - - 0
    fanout: 1
  - level: 1
    node_type: GLB
    buffer_size: 3715000
    roles: ROLE_GLB
    bandwidth: 512
    fanouts: 8
    aggregate: true
    routing_patterns:
      INPUT:
        port_groups:
        - - 0
          - 4
        - - 1
          - 5
        - - 2
          - 6
        - - 3
          - 7
      WEIGHT:
        port_groups:
        - - 0
        - - 1
        - - 2
        - - 3
        - - 4
        - - 5
        - - 6
        - - 7
        forward_count: 2
      OUTPUT:
        port_groups:
        - - 0
          - 1
          - 2
          - 3
        - - 4
          - 5
          - 6
          - 7
    fanout: 8
  - level: 2
    node_type: DISTRIBUTOR
    buffer_size: 0
    roles: ROLE_DISTRIBUTOR
    bandwidth: 128
    fanouts: 16
    aggregate: true
    routing_patterns:
      WEIGHT:
        port_groups:
        - - 0
        - - 1
        - - 2
        - - 3
        - - 4
        - - 5
        - - 6
        - - 7
        - - 8
        - - 9
        - - 10
        - - 11
        - - 12
        - - 13
        - - 14
        - - 15
      INPUT:
        port_groups:
        - - 0
          - 8
        - - 1
          - 9
        - - 2
          - 10
        - - 3
          - 11
        - - 4
          - 12
        - - 5
          - 13
        - - 6
          - 14
        - - 7
          - 15
      OUTPUT:
        port_groups:
        - - 0
          - 1
          - 2
          - 3
          - 4
          - 5
          - 6
          - 7
        - - 8
          - 9
          - 10
          - 11
          - 12
          - 13
          - 14
          - 15
    fanout: 16
  - level: 3
    node_type: ROLE_BUFFER
    buffer_size:
    - 384
    - 32
    - 32
    roles: ROLE_BUFFER
    bandwidth: 8
    fanouts: 0
    fanout: 0
workload:
  working_set:
  - role: ROLE_DRAM
    outputs_required_count: 71168
    data:
    - data_space: Weights
      size: 196608
      reuse_strategy: resident
    - data_space: Inputs
      size: 55376
      reuse_strategy: resident
    - data_space: Outputs
      size: 71168
      reuse_strategy: resident
  - role: ROLE_GLB
    outputs_required_count: 142336
    data:
    - data_space: Weights
      size: 0
      reuse_strategy: resident
    - data_space: Inputs
      size: 53376
      reuse_strategy: resident
    - data_space: Outputs
      size: 71168
      reuse_strategy: resident
  - role: ROLE_BUFFER
    outputs_required_count: 0
    data:
    - data_space: Weights
      size: 96
      reuse_strategy: temporal
    - data_space: Inputs
      size: 6
      reuse_strategy: temporal
    - data_space: Outputs
      size: 16
      reuse_strategy: temporal
  data_flow_specs:
  - role: ROLE_DRAM
    properties:
      sync_per_timestep: 0
    schedule_template:
      total_timesteps: 1
      delta_events:
      - trigger:
          on_timestep: fallback
        name: INITIAL_LOAD_DRAM_TO_GLB
        delta:
        - data_space: Weights
          size: 96
          target_role: ROLE_BUFFER
        - data_space: Weights
          size: 96
          target_role: ROLE_BUFFER
        - data_space: Weights
          size: 96
          target_role: ROLE_BUFFER
        - data_space: Weights
          size: 96
          target_role: ROLE_BUFFER
        - data_space: Weights
          size: 96
          target_role: ROLE_BUFFER
        - data_space: Weights
          size: 96
          target_role: ROLE_BUFFER
        - data_space: Weights
          size: 96
          target_role: ROLE_BUFFER
        - data_space: Weights
          size: 96
          target_role: ROLE_BUFFER
        - data_space: Weights
          size: 96
          target_role: ROLE_BUFFER
        - data_space: Weights
          size: 96
          target_role: ROLE_BUFFER
        - data_space: Weights
          size: 96
          target_role: ROLE_BUFFER
        - data_space: Weights
          size: 96
          target_role: ROLE_BUFFER
        - data_space: Weights
          size: 96
          target_role: ROLE_BUFFER
        - data_space: Weights
          size: 96
          target_role: ROLE_BUFFER
        - data_space: Weights
          size: 96
          target_role: ROLE_BUFFER
        - data_space: Weights
          size: 96
          target_role: ROLE_BUFFER
        - data_space: Inputs
          size: 53376
          target_role: ROLE_GLB
        - data_space: Outputs
          size: 71168
          target_role: ROLE_GLB
  - role: ROLE_GLB
    properties:
      sync_per_timestep: 0
    schedule_template:
      total_timesteps: 2224
      delta_events:
      - trigger:
          on_timestep: fallback
        name: MULTICAST_FILL_INPUTS
        delta:
        - data_space: Inputs
          size: 6
          target_role: ROLE_BUFFER
        - data_space: Outputs
          size: 16
          target_role: ROLE_BUFFER
    command_definitions:
    - command_id: 0
      name: PROCESS_FULL_CONTEXT
      evict_payload:
        Weights: 0
        Inputs: 0
        Outputs: 71168
  - role: ROLE_BUFFER
    properties:
      compute_latency: 96
      eviction_interval_cycles: 139
      weight_eviction_amount: 96
    schedule_template:
      total_timesteps: 1
      delta_events: []
    command_definitions:
    - command_id: 0
      name: PROCESS_DELTA
      evict_payload:
        Weights: 0
        Inputs: 6
        Outputs: 16
buffer_depth: 8
flit_size: 32
r2h_link_length: 2.0
r2r_link_length: 1.0
n_virtual_channels: 3
routing_algorithm: XY
routing_table_filename: ''
dyad_threshold: 0.6
selection_strategy: RANDOM
use_winoc: false
use_wirxsleep: false
clock_period_ps: 1000
reset_time: 10
simulation_time: 4000000
stats_warm_up_time: 0
detailed: false
max_volume_to_be_drained: 0
show_buffer_stats: false
verbose_mode: VERBOSE_OFF
trace_mode: false
trace_filename: debug_trace.log
min_packet_size: 8
max_packet_size: 8
packet_injection_rate: 0.1
probability_of_retransmission: 0.1
traffic_distribution: TRAFFIC_TABLE_BASED
traffic_table_filename: empty_traffic.txt
