# Buffer
## Buffer 类功能介绍

`Buffer` 类模拟了网络中的缓冲区，用于存储和管理数据包（Flit）。以下是该类的主要功能：

**1. 缓冲区管理**

*   **设置和获取缓冲区大小**：`SetMaxBufferSize()` 和 `GetMaxBufferSize()` 用于设置和获取缓冲区的最大容量（以 Flit 为单位）。
*   **检查缓冲区状态**：`IsFull()` 和 `IsEmpty()` 用于判断缓冲区是否已满或为空。
*   **获取可用槽位数**：`getCurrentFreeSlots()` 用于获取缓冲区中可用的空闲槽位数。

**2. 数据包操作**

*   **入队（Push）**：`Push()` 方法将一个 Flit 添加到缓冲区。如果缓冲区已满，则调用 `Drop()` 方法进行处理（例如丢弃数据包）。
*   **出队（Pop）**：`Pop()` 方法从缓冲区中移除并返回一个 Flit。如果缓冲区为空，则调用 `Empty()` 方法进行处理。
*   **查看队首（Front）**：`Front()` 方法返回缓冲区中第一个 Flit 的副本，但不移除它。

**3. 统计信息**

*   **统计信息显示**：`ShowStats()` 方法用于输出缓冲区的统计信息，例如最大占用率、平均占用时间等。
*   **禁用**：`Disable()` 方法用于禁用缓冲区。

**4. 调试功能**

*   **打印缓冲区内容**：`Print()` 方法用于打印缓冲区中的内容，方便调试。
*   **死锁检测**：`deadlockFree()` 和 `deadlockCheck()` 方法用于检测缓冲区是否发生死锁。

**5. 其他功能**

*   **设置和获取标签**：`setLabel()` 和 `getLabel()` 方法用于设置和获取缓冲区的标签，方便识别。

**内部实现**

*   `buffer`：使用 `queue<Flit>` 存储 Flit 数据包。
*   `max_buffer_size`：存储缓冲区的最大容量。
*   `max_occupancy`、`hold_time`、`mean_occupancy`：用于统计缓冲区占用率等信息。

**类型定义**

*   `BufferBank`：定义了一个 `Buffer` 数组，用于表示一组虚拟通道的缓冲区。

总而言之，`Buffer` 类提供了一个灵活且可配置的缓冲区实现，用于在 NoC 模拟中存储和管理数据包，并提供了一些统计和调试功能，方便分析和优化网络性能。